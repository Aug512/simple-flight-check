(this["webpackJsonpsimple-flight-check"]=this["webpackJsonpsimple-flight-check"]||[]).push([[0],{12:function(e,t,a){e.exports={authorisationScreen:"Authorisation_authorisationScreen__1lr8d",formCard:"Authorisation_formCard__3lkQ3",title:"Authorisation_title__325zc",inputLabel:"Authorisation_inputLabel__2fhNk",inputField:"Authorisation_inputField__xslwo",formGroup:"Authorisation_formGroup__25t2C",feedbackMessage:"Authorisation_feedbackMessage__2i9O0",buttonContainer:"Authorisation_buttonContainer__1ivKq",submitButton:"Authorisation_submitButton__1F5BO"}},13:function(e,t,a){e.exports={MainContainer:"MainContainer_MainContainer__2PjMM",logOutButton:"MainContainer_logOutButton__2iIfs",card:"MainContainer_card__OUv0W",favourites:"MainContainer_favourites__2wqxR",favouritesCounter:"MainContainer_favouritesCounter__1l7Rh",errorBox:"MainContainer_errorBox__1nOm6",errorString:"MainContainer_errorString__348-Z",loaderContainer:"MainContainer_loaderContainer__22X_I",ldsRipple:"MainContainer_ldsRipple__3kHAT","lds-ripple":"MainContainer_lds-ripple__2RmC0"}},14:function(e,t,a){e.exports={cardHeader:"CardHeader_cardHeader__1O1eg",breadcrumbs__back:"CardHeader_breadcrumbs__back__3HqkJ",breadcrumbs__current:"CardHeader_breadcrumbs__current__2Qa2-",datepicker:"CardHeader_datepicker__2AOHz",datepicker__date:"CardHeader_datepicker__date__Yq-57",datepicker__input:"CardHeader_datepicker__input__2VkYP",datepicker__icon:"CardHeader_datepicker__icon__uKha9"}},28:function(e,t,a){e.exports={carousel:"Carousel_carousel__QZuyW",carousel__image:"Carousel_carousel__image__2FEtX"}},34:function(e,t,a){e.exports={flightsList:"FlightsList_flightsList__2cNAf"}},49:function(e,t,a){},54:function(e,t,a){"use strict";a.r(t);var r=a(0),n=a.n(r),i=a(20),s=a.n(i),c=a(11),o=a(29),u=a(56),l=a(33),d=a(57),h="USER/AUTHORISE",b="USER/DEAUTHORISE",_=(a(49),a(12)),f=a.n(_),j=a(2),p=Object(c.b)(null,(function(e){return{authorise:function(){return e({type:h})}}}))((function(e){var t=e.authorise,a=Object(r.useState)(!1),n=Object(o.a)(a,2),i=n[0],s=n[1],c=Object(r.useState)("\u041f\u0430\u0440\u043e\u043b\u044c \u0434\u043e\u043b\u0436\u0435\u043d \u0441\u043e\u0434\u0435\u0440\u0436\u0430\u0442\u044c \u043d\u0435 \u043c\u0435\u043d\u0435\u0435 8 \u0441\u0438\u043c\u0432\u043e\u043b\u043e\u0432"),h=Object(o.a)(c,2),b=h[0],_=h[1];return Object(j.jsx)("div",{className:f.a.authorisationScreen,children:Object(j.jsxs)("div",{className:"card "+f.a.formCard,children:[Object(j.jsx)("h2",{className:f.a.title,children:"Simple Flight Check"}),Object(j.jsxs)(u.a,{noValidate:!0,validated:i,onSubmit:function(e){return function(e){e.preventDefault(),e.stopPropagation();var a=e.target,r=a[1].value;[a[0],a[1]].forEach((function(e){e.validity.valid||(e.labels[0].style.color="#EB1717")})),!1===a.checkValidity()?r.length<=8?_("\u041f\u0430\u0440\u043e\u043b\u044c \u0434\u043e\u043b\u0436\u0435\u043d \u0441\u043e\u0434\u0435\u0440\u0436\u0430\u0442\u044c \u043d\u0435 \u043c\u0435\u043d\u0435\u0435 8 \u0441\u0438\u043c\u0432\u043e\u043b\u043e\u0432"):r.match(/[\u0400-\u0484\u0487-\u052F\u1C80-\u1C88\u1D2B\u1D78\u2DE0-\u2DFF\uA640-\uA69F\uFE2E\uFE2F]/g)&&_("\u041f\u0430\u0440\u043e\u043b\u044c \u043d\u0435 \u0434\u043e\u043b\u0436\u0435\u043d \u0441\u043e\u0434\u0435\u0440\u0436\u0430\u0442\u044c \u043a\u0438\u0440\u0438\u043b\u043b\u0438\u0446\u0443"):(window.sessionStorage.setItem("isAuthorised","true"),t()),s(!0)}(e)},onChange:function(e){return function(e){[e.target.form[0].labels[0],e.target.form[1].labels[0]].forEach((function(e){e.style.color=""})),s(!1)}(e)},children:[Object(j.jsx)(u.a.Row,{children:Object(j.jsxs)(u.a.Group,{as:l.a,controlId:"validationCustom01",className:f.a.formGroup,children:[Object(j.jsx)(u.a.Label,{className:f.a.inputLabel,children:"\u041b\u043e\u0433\u0438\u043d"}),Object(j.jsx)(u.a.Control,{type:"email",required:!0,className:f.a.inputField,autoComplete:"none"}),Object(j.jsx)(u.a.Control.Feedback,{type:"invalid",className:f.a.feedbackMessage,children:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u0441\u0443\u0449\u0435\u0441\u0442\u0432\u0443\u044e\u0449\u0438\u0439 email"})]})}),Object(j.jsx)(u.a.Row,{children:Object(j.jsxs)(u.a.Group,{as:l.a,controlId:"validationCustom02",className:f.a.formGroup,children:[Object(j.jsx)(u.a.Label,{className:f.a.inputLabel,children:"\u041f\u0430\u0440\u043e\u043b\u044c"}),Object(j.jsx)(u.a.Control,{required:!0,type:"Password",pattern:"[^\u0410-\u042f\u0430-\u044f\u0401\u0451]{8,}",className:f.a.inputField}),Object(j.jsx)(u.a.Control.Feedback,{type:"invalid",className:f.a.feedbackMessage,children:b})]})}),Object(j.jsx)("div",{className:f.a.buttonContainer,children:Object(j.jsx)(d.a,{type:"submit",className:f.a.submitButton,children:"\u0412\u043e\u0439\u0442\u0438"})})]})]})})})),m=a(28),g=a.n(m),O=Object(c.b)((function(e){return{carouselImages:e.carouselImages}}),null)((function(e){var t=e.carouselImages;return Object(j.jsx)("div",{className:g.a.carousel,children:t.map((function(e,t){return Object(j.jsx)("img",{className:g.a.carousel__image,src:e,alt:"photo"},t)}))})})),v=a(10);function x(){var e=new Date,t=[e.getFullYear(),e.getMonth(),e.getDate()],a=t[1],r=t[2];return a=a<10?"0"+(a+1):a+1,"".concat(t[0],"-").concat(a,"-").concat(r)}function C(e,t){var a=new Date(e),r=[a.getFullYear(),a.getMonth(),a.getDate()],n=r[0],i=r[1],s=r[2];return"".concat(s=s<10?"0"+s:s," ").concat(t[i]," ").concat(n)}var F="FLIGHTS/FETCH_FLIGHTS",N="FLIGHTS/REQUESTED_FLIGHTS",y="FLIGHTS/REQUESTED_FLIGHTS_SUCCESS",I="FLIGHTS/REQUESTED_FLIGHTS_FALIURE",D="FLIGHTS/ADD_FLIGHT_TO_FAVOURITES",k="FLIGHTS/REMOVE_FLIGHT_FROM_FAVOURITES",S=function(e){return{type:F,params:e}},E=function(e){return{type:N,params:e}},T=["\u044f\u043d\u0432\u0430\u0440\u044f","\u0444\u0435\u0432\u0440\u0430\u043b\u044f","\u043c\u0430\u0440\u0442\u0430","\u0430\u043f\u0440\u0435\u043b\u044f","\u043c\u0430\u044f","\u0438\u044e\u043d\u044f","\u0438\u044e\u043b\u044f","\u0430\u0432\u0433\u0443\u0441\u0442\u0430","\u0441\u0435\u043d\u0442\u044f\u0431\u0440\u044f","\u043e\u043a\u0442\u044f\u0431\u0440\u044f","\u043d\u043e\u044f\u0431\u0440\u044f","\u0434\u0435\u043a\u0430\u0431\u0440\u044f"],M=a(14),L=a.n(M),w=Object(c.b)((function(e){return{initialParams:e.initialRequestParams}}),(function(e){return{fetchFlights:function(t){return e(S(t))}}}))((function(e){var t=e.initialParams,a=e.fetchFlights;return Object(j.jsxs)("header",{className:L.a.cardHeader,children:[Object(j.jsxs)("div",{className:L.a.breadcrumbs,children:[Object(j.jsx)("a",{className:L.a.breadcrumbs__back,href:"#",children:"\u0412\u044b\u043b\u0435\u0442\u044b"}),Object(j.jsx)("span",{className:L.a.breadcrumbs__current,children:"SVO - JFK"})]}),Object(j.jsxs)("label",{htmlFor:"datepicker",className:L.a.datepicker,children:[Object(j.jsxs)("span",{className:L.a.datepicker__date,children:[C(Date.now(),T),"   ","                                                    "]}),Object(j.jsx)("i",{className:L.a.datepicker__icon}),Object(j.jsx)("input",{type:"date",id:"datepicker",className:L.a.datepicker__input,defaultValue:x(),onChange:function(e){e.target.labels[0].childNodes[0].innerText=C(e.target.valueAsNumber,T),function(e){var r=Object(v.a)({},t);r.date=e,a(r)}(e.target.value)}})]})]})}));var A=a(9),H=a.n(A),R=Object(c.b)((function(e,t){return{flightData:t.flightData,totalData:e.flights}}),(function(e){return{setFavourites:function(t,a){return e(function(e,t){return t?{type:D,id:e}:{type:k,id:e}}(t,a))}}}))((function(e){var t=e.flightData,a=e.setFavourites;return Object(j.jsxs)("div",{className:H.a.flightCard,children:[Object(j.jsx)("div",{className:H.a.airplaneImage}),Object(j.jsxs)("div",{className:H.a.mainData,children:[Object(j.jsxs)("p",{className:H.a.dataPlaces,children:[Object(j.jsx)("span",{className:H.a.from,children:"".concat(t.origin.city," (").concat(t.origin.airportCode,")")}),Object(j.jsx)("span",{className:H.a.to,children:"".concat(t.destination.city," (").concat(t.destination.airportCode,")")})]}),Object(j.jsxs)("p",{className:H.a.dataDate,children:[Object(j.jsx)("span",{className:H.a.date,children:t.departureTime[0]}),Object(j.jsx)("span",{className:H.a.time,children:t.departureTime[1]})]}),Object(j.jsx)("p",{className:H.a.dataCarrier,children:t.carriers.length>1?t.carriers.map((function(e){return e.name})):t.carriers[0].name})]}),Object(j.jsxs)("div",{className:H.a.additionalData,children:[Object(j.jsxs)("div",{className:H.a.favourites,children:[t.isInFavourites&&Object(j.jsx)("i",{className:H.a.favouritesTrue,onClick:function(){return a(t.id,!t.isInFavourites)}}),!t.isInFavourites&&Object(j.jsx)("i",{className:H.a.favouritesFalse,onClick:function(){return a(t.id,!t.isInFavourites)}})]}),Object(j.jsxs)("p",{className:H.a.price,children:[Object(j.jsx)("small",{className:H.a.priceLabel,children:"\u0426\u0435\u043d\u0430:"}),Object(j.jsx)("strong",{className:H.a.priceValue,children:"".concat(t.minPrice," ").concat(t.currency.currencySymbol)})]})]})]})})),P=a(34),U=a.n(P),G=Object(c.b)((function(e){return{flights:e.flights}}),(function(e){return{fetchFlights:function(t){return e(S(t))}}}))((function(e){var t=e.flights;return Object(j.jsx)("div",{className:U.a.flightsList,children:t.map((function(e){return Object(j.jsx)(R,{flightData:e},e.id)}))})})),B=a(13),V=a.n(B);var q=Object(c.b)((function(e){return{errorMessage:e.errorMessage,favouritesCounter:e.favouritesFlightsCounter}}),(function(e){return{deauthorise:function(){return e({type:b})}}}))((function(e){var t=e.deauthorise,a=e.isLoading,r=e.favouritesCounter,n=e.errorMessage;return Object(j.jsxs)("div",{className:V.a.MainContainer,children:[Object(j.jsx)("button",{onClick:function(){return window.sessionStorage.removeItem("isAuthorised"),void t()},className:V.a.logOutButton,children:"\u0412\u044b\u0439\u0442\u0438"}),Object(j.jsxs)("div",{className:V.a.card,children:[Object(j.jsx)(w,{}),Object(j.jsx)(O,{}),Object(j.jsxs)("p",{className:V.a.favourites,children:["\u0414\u043e\u0431\u0430\u0432\u043b\u0435\u043d\u043e \u0432 \u0418\u0437\u0431\u0440\u0430\u043d\u043d\u043e\u0435: ",Object(j.jsx)("b",{style:{color:"blue"},className:V.a.favouritesCounter,children:r})," \u0440\u0435\u0439\u0441\u043e\u0432"]}),a&&Object(j.jsxs)("div",{className:V.a.loaderContainer,children:[Object(j.jsxs)("div",{class:V.a.ldsRipple,children:[Object(j.jsx)("div",{}),Object(j.jsx)("div",{})]}),"      "]}),!a&&Object(j.jsx)(G,{}),!a&&n&&Object(j.jsx)("div",{className:V.a.errorBox,children:n.split(".").map((function(e){return Object(j.jsxs)("h3",{className:V.a.errorString,children:[e,"."]},e)}))})]})]})}));var Q=Object(c.b)((function(e){return{isUserAuthorised:e.isUserAuthorised,initialParams:e.initialRequestParams}}),(function(e){return{fetchFlights:function(t){return e(S(t))}}}))((function(e){var t=e.isUserAuthorised,a=e.fetchFlights,n=e.initialParams;return Object(r.useEffect)((function(){a(n)}),[]),Object(j.jsxs)(j.Fragment,{children:[!t&&Object(j.jsx)(p,{}),t&&Object(j.jsx)(q,{})]})})),J=a(15),Y=a(37),K=a(16),Z=a.n(K),W=a(35);function z(e){return e.ok?e.json():400===e.status?{isError:!0,errorCode:e.status,message:"\u0412\u044b\u0431\u0440\u0430\u043d\u0430 \u043d\u0435\u043a\u043e\u0440\u0440\u0435\u043a\u0442\u043d\u0430\u044f \u0434\u0430\u0442\u0430. \u0412\u044b\u0431\u0435\u0440\u0438\u0442\u0435 \u0434\u0430\u0442\u0443 \u0432\u044b\u043b\u0435\u0442\u0430, \u043d\u0435 \u0440\u0430\u043d\u0435\u0435 \u0442\u0435\u043a\u0443\u0449\u0435\u0439"}:429===e.status?{isError:!0,errorCode:e.status,message:"\u0421\u043b\u0438\u0448\u043a\u043e\u043c \u0431\u043e\u043b\u044c\u0448\u043e\u0435 \u043a\u043e\u043b\u0438\u0447\u0435\u0441\u0442\u0432\u043e \u0437\u0430\u043f\u0440\u043e\u0441\u043e\u0432 \u0437\u0430 \u043f\u043e\u0441\u043b\u0435\u0434\u043d\u044e\u044e \u043c\u0438\u043d\u0443\u0442\u0443. \u041f\u043e\u043f\u0440\u043e\u0431\u0443\u0439\u0442\u0435 \u043f\u043e\u0437\u0436\u0435."}:500===e.status?{isError:!0,errorCode:e.status,message:"\u0412\u043d\u0443\u0442\u0440\u0435\u043d\u043d\u044f\u044f \u043e\u0448\u0438\u0431\u043a\u0430 \u0441\u0435\u0440\u0432\u0435\u0440\u0430. \u041f\u043e\u043f\u0440\u043e\u0431\u0443\u0439\u0442\u0435 \u043f\u043e\u0437\u0436\u0435."}:void 0}function X(e){return $.apply(this,arguments)}function $(){return($=Object(W.a)(Z.a.mark((function e(t){var a;return Z.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("https://skyscanner-skyscanner-flight-search-v1.p.rapidapi.com/apiservices/browsequotes/v1.0/".concat(t.country,"/").concat(t.currency,"/").concat(t.locale,"/").concat(t.origin,"/").concat(t.destination,"/").concat(t.date),{method:"GET",headers:{"x-rapidapi-key":"97009c5c83mshd7fff0bb70f167cp1cde7bjsn25fb3318eb04","x-rapidapi-host":"skyscanner-skyscanner-flight-search-v1.p.rapidapi.com"}}).then((function(e){return z(e)}));case 2:if(!(a=e.sent).hasOwnProperty("isError")||!a.isError){e.next=5;break}throw new Error(a.message);case 5:return e.next=7,a;case 7:return e.abrupt("return",e.sent);case 8:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var ee=function(e,t){var a=t.find((function(t){return t.PlaceId===e}));return{city:a.CityName,airportCode:a.SkyscannerCode}};function te(e){var t,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:",",n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:" ",i=parseInt(e=(+e||0).toFixed(a))+"";(t=i.length)>3?t%=3:t=0;var s=t?i.substr(0,t)+n:"",c=i.substr(t).replace(/(\d{3})(?=\d)/g,"$1"+n),o=a&&i%100===0?r+Math.abs(e-i).toFixed(a).replace(/-/,0).slice(2):"";return s+c+o}var ae=function(e,t,a){var r=new Date(e),n=new Date(t),i=[r.getFullYear(),r.getMonth(),r.getDate()],s=i[0],c=i[1],o=i[2],u=[n.getHours(),n.getMinutes()],l=u[0],d=u[1];return["".concat(o," ").concat(a[c],", ").concat(s),"".concat(l,":").concat(d<10?"0"+d:d)]},re=function(e,t,a,r){return e.map((function(e){var n,i,s,c=function(e,t){var a=new Date(e),r=new Date(t),n=[a.getFullYear(),a.getMonth(),a.getDate()],i=n[0],s=n[1],c=n[2],o=[r.getHours(),r.getMinutes()];return new Date(i,s,c,o[0],o[1]).toUTCString()}(e.OutboundLeg.DepartureDate,e.QuoteDateTime)+e.MinPrice;return{id:c,minPrice:te(e.MinPrice,t.Currencies[0].DecimalDigits,t.Currencies[0].DecimalSeparator,t.Currencies[0].ThousandsSeparator),carriers:(i=e.OutboundLeg.CarrierIds,s=t.Carriers,i.map((function(e){var t=s.find((function(t){return t.CarrierId===e}));return{id:t.CarrierId,name:t.Name}}))),origin:ee(e.OutboundLeg.OriginId,t.Places),destination:ee(e.OutboundLeg.DestinationId,t.Places),currency:(n=t.Currencies[0],{decimalDigits:n.DecimalDigits,decimalSeparator:n.DecimalSeparator,currencySymbol:n.Symbol,thousandsSeparator:n.ThousandsSeparator}),departureTime:ae(e.OutboundLeg.DepartureDate,e.QuoteDateTime,a),isInFavourites:!!r.favouritesIds.find((function(e){return e===c}))}}))},ne=a(17),ie=Z.a.mark(ce),se=Z.a.mark(oe);function ce(){return Z.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(ne.d)(F,oe);case 2:case"end":return e.stop()}}),ie)}function oe(e){var t,a,r;return Z.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return t=e.params,n.prev=1,n.next=4,Object(ne.b)(E(t));case 4:return n.next=6,Object(ne.a)((function(){return X(t)}));case 6:return a=n.sent,n.next=9,Object(ne.c)();case 9:return r=n.sent,n.next=12,Object(ne.b)((s=re(a.Quotes,a,T,r),{type:y,payload:s}));case 12:n.next=18;break;case 14:return n.prev=14,n.t0=n.catch(1),n.next=18,Object(ne.b)((i=n.t0.message,{type:I,message:i}));case 18:case"end":return n.stop()}var i,s}),se,null,[[1,14]])}var ue=a(36),le=a(23);var de=[a.p+"static/media/photo1.f5341176.jpg",a.p+"static/media/photo2.bcbc5709.jpg",a.p+"static/media/photo3.e6e11630.jpg"],he={isUserAuthorised:!!sessionStorage.getItem("isAuthorised"),isLoading:!0,flights:[],favouritesFlightsCounter:0,favouritesIds:[],errorMessage:"",initialRequestParams:{country:"RU",currency:"rub",locale:"RU-ru",origin:"SVO-sky",destination:"JFK-sky",date:"2021-03"},carouselImages:de.concat(de,de)};var be=Object(Y.a)(),_e=Object(J.createStore)((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:he,t=arguments.length>1?arguments[1]:void 0,a=function(a){var r=Object(le.a)(e.flights);return r.find((function(e){return e.id===t.id})).isInFavourites=a,r};switch(t.type){case h:return Object(v.a)(Object(v.a)({},e),{},{isUserAuthorised:!0});case b:return Object(v.a)(Object(v.a)({},e),{},{isUserAuthorised:!1});case N:return Object(v.a)(Object(v.a)({},e),{},{isLoading:!0,errorMessage:""});case y:return Object(v.a)(Object(v.a)({},e),{},{flights:t.payload,isLoading:!1});case I:return Object(v.a)(Object(v.a)({},e),{},{flights:[],isLoading:!1,errorMessage:t.message});case D:return Object(v.a)(Object(v.a)({},e),{},{flights:a(!0),favouritesFlightsCounter:e.favouritesFlightsCounter+1,favouritesIds:[].concat(Object(le.a)(e.favouritesIds),[t.id])});case k:return Object(v.a)(Object(v.a)({},e),{},{flights:a(!1),favouritesFlightsCounter:e.favouritesFlightsCounter-1,favouritesIds:Object(le.a)(e.favouritesIds.filter((function(e){return e!==t.id})))});default:return e}}),Object(ue.composeWithDevTools)(Object(J.applyMiddleware)(be)));be.run(ce);var fe=_e;a(53);s.a.render(Object(j.jsx)(n.a.StrictMode,{children:Object(j.jsx)(c.a,{store:fe,children:Object(j.jsx)(Q,{})})}),document.getElementById("root"))},9:function(e,t,a){e.exports={flightCard:"Flight_flightCard__2mlw-",airplaneImage:"Flight_airplaneImage__21Fos",mainData:"Flight_mainData__2fpgw",dataPlaces:"Flight_dataPlaces__2u42q",from:"Flight_from__3HqUB",to:"Flight_to__TxnpJ",dataDate:"Flight_dataDate__oaRcb",date:"Flight_date__1b5ON",time:"Flight_time__1AKFQ",dataCarrier:"Flight_dataCarrier__V4BZ9",additionalData:"Flight_additionalData__36ts6",favourites:"Flight_favourites__1TEgH",favouritesTrue:"Flight_favouritesTrue__2Ai5T",favouritesFalse:"Flight_favouritesFalse__2h_ym",price:"Flight_price__1I_ZI",priceLabel:"Flight_priceLabel__VyLfJ",priceValue:"Flight_priceValue__3_9CJ"}}},[[54,1,2]]]);